{"ast":null,"code":"// src/store/crowdStore.js\nimport{uid}from\"../utils/id\";const KEY=\"pph:crowdReports\";/**\n * report:\n * { id, courtId, players, note, condition, createdAt }\n */export function loadCrowdReports(){try{return JSON.parse(localStorage.getItem(KEY)||\"[]\");}catch(_unused){return[];}}export function saveCrowdReports(list){localStorage.setItem(KEY,JSON.stringify(list));}export function addCrowdReport(_ref){let{courtId,players,note,condition}=_ref;const list=loadCrowdReports();list.unshift({id:uid(\"crowd\"),courtId,players:Number(players||0),note:String(note||\"\"),condition:String(condition||\"Good\"),createdAt:Date.now()});saveCrowdReports(list);return list;}export function getCourtCrowdSummary(courtId){const list=loadCrowdReports().filter(r=>r.courtId===courtId);// take most recent 5\nconst recent=list.slice(0,5);const avgPlayers=recent.length?Math.round(recent.reduce((sum,r)=>sum+(Number(r.players)||0),0)/recent.length):0;return{recent,avgPlayers};}","map":{"version":3,"names":["uid","KEY","loadCrowdReports","JSON","parse","localStorage","getItem","_unused","saveCrowdReports","list","setItem","stringify","addCrowdReport","_ref","courtId","players","note","condition","unshift","id","Number","String","createdAt","Date","now","getCourtCrowdSummary","filter","r","recent","slice","avgPlayers","length","Math","round","reduce","sum"],"sources":["/Users/taikiyamashita/Desktop/hawaii-pickle-play/src/store/crowdStore.js"],"sourcesContent":["// src/store/crowdStore.js\nimport { uid } from \"../utils/id\";\n\nconst KEY = \"pph:crowdReports\";\n\n/**\n * report:\n * { id, courtId, players, note, condition, createdAt }\n */\nexport function loadCrowdReports() {\n  try {\n    return JSON.parse(localStorage.getItem(KEY) || \"[]\");\n  } catch {\n    return [];\n  }\n}\n\nexport function saveCrowdReports(list) {\n  localStorage.setItem(KEY, JSON.stringify(list));\n}\n\nexport function addCrowdReport({ courtId, players, note, condition }) {\n  const list = loadCrowdReports();\n  list.unshift({\n    id: uid(\"crowd\"),\n    courtId,\n    players: Number(players || 0),\n    note: String(note || \"\"),\n    condition: String(condition || \"Good\"),\n    createdAt: Date.now(),\n  });\n  saveCrowdReports(list);\n  return list;\n}\n\nexport function getCourtCrowdSummary(courtId) {\n  const list = loadCrowdReports().filter((r) => r.courtId === courtId);\n\n  // take most recent 5\n  const recent = list.slice(0, 5);\n\n  const avgPlayers = recent.length\n    ? Math.round(recent.reduce((sum, r) => sum + (Number(r.players) || 0), 0) / recent.length)\n    : 0;\n\n  return { recent, avgPlayers };\n}\n"],"mappings":"AAAA;AACA,OAASA,GAAG,KAAQ,aAAa,CAEjC,KAAM,CAAAC,GAAG,CAAG,kBAAkB,CAE9B;AACA;AACA;AACA,GACA,MAAO,SAAS,CAAAC,gBAAgBA,CAAA,CAAG,CACjC,GAAI,CACF,MAAO,CAAAC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAACL,GAAG,CAAC,EAAI,IAAI,CAAC,CACtD,CAAE,MAAAM,OAAA,CAAM,CACN,MAAO,EAAE,CACX,CACF,CAEA,MAAO,SAAS,CAAAC,gBAAgBA,CAACC,IAAI,CAAE,CACrCJ,YAAY,CAACK,OAAO,CAACT,GAAG,CAAEE,IAAI,CAACQ,SAAS,CAACF,IAAI,CAAC,CAAC,CACjD,CAEA,MAAO,SAAS,CAAAG,cAAcA,CAAAC,IAAA,CAAwC,IAAvC,CAAEC,OAAO,CAAEC,OAAO,CAAEC,IAAI,CAAEC,SAAU,CAAC,CAAAJ,IAAA,CAClE,KAAM,CAAAJ,IAAI,CAAGP,gBAAgB,CAAC,CAAC,CAC/BO,IAAI,CAACS,OAAO,CAAC,CACXC,EAAE,CAAEnB,GAAG,CAAC,OAAO,CAAC,CAChBc,OAAO,CACPC,OAAO,CAAEK,MAAM,CAACL,OAAO,EAAI,CAAC,CAAC,CAC7BC,IAAI,CAAEK,MAAM,CAACL,IAAI,EAAI,EAAE,CAAC,CACxBC,SAAS,CAAEI,MAAM,CAACJ,SAAS,EAAI,MAAM,CAAC,CACtCK,SAAS,CAAEC,IAAI,CAACC,GAAG,CAAC,CACtB,CAAC,CAAC,CACFhB,gBAAgB,CAACC,IAAI,CAAC,CACtB,MAAO,CAAAA,IAAI,CACb,CAEA,MAAO,SAAS,CAAAgB,oBAAoBA,CAACX,OAAO,CAAE,CAC5C,KAAM,CAAAL,IAAI,CAAGP,gBAAgB,CAAC,CAAC,CAACwB,MAAM,CAAEC,CAAC,EAAKA,CAAC,CAACb,OAAO,GAAKA,OAAO,CAAC,CAEpE;AACA,KAAM,CAAAc,MAAM,CAAGnB,IAAI,CAACoB,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAE/B,KAAM,CAAAC,UAAU,CAAGF,MAAM,CAACG,MAAM,CAC5BC,IAAI,CAACC,KAAK,CAACL,MAAM,CAACM,MAAM,CAAC,CAACC,GAAG,CAAER,CAAC,GAAKQ,GAAG,EAAIf,MAAM,CAACO,CAAC,CAACZ,OAAO,CAAC,EAAI,CAAC,CAAC,CAAE,CAAC,CAAC,CAAGa,MAAM,CAACG,MAAM,CAAC,CACxF,CAAC,CAEL,MAAO,CAAEH,MAAM,CAAEE,UAAW,CAAC,CAC/B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}