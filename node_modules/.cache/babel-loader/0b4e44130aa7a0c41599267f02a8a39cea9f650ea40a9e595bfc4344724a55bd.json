{"ast":null,"code":"import{useMemo,useState}from\"react\";import SearchBar from\"../components/SearchBar\";import SegmentedControl from\"../components/SegmentedControl\";import FilterBar from\"../components/FilterBar\";import CourtDrawer from\"../components/CourtDrawer\";import CourtMap from\"../features/courts/CourtMap\";import CourtList from\"../features/courts/CourtList\";import{computeCourtStatus}from\"../utils/time\";import{loadCourts}from\"../store/courtsStore\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Home(){const[view,setView]=useState(\"Map\");const[selectedId,setSelectedId]=useState(null);const[query,setQuery]=useState(\"\");const[island,setIsland]=useState(\"All\");const[skill,setSkill]=useState(\"All\");const[openNowOnly,setOpenNowOnly]=useState(false);const courts=loadCourts();const computedById=useMemo(()=>{const map={};for(const c of courts)map[c.id]=computeCourtStatus(c);return map;},[courts]);const filtered=useMemo(()=>{const q=query.trim().toLowerCase();return courts.filter(c=>{if(island!==\"All\"&&c.island!==island)return false;if(skill!==\"All\"&&!(c.skillLevels||[]).includes(skill))return false;const meta=computedById[c.id];if(openNowOnly&&!(meta!==null&&meta!==void 0&&meta.isOpenNow))return false;if(!q)return true;const hay=\"\".concat(c.name,\" \").concat(c.city,\" \").concat(c.island,\" \").concat(c.address).toLowerCase();return hay.includes(q);});},[courts,computedById,query,island,skill,openNowOnly]);const selected=useMemo(()=>courts.find(c=>c.id===selectedId)||null,[courts,selectedId]);return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(SearchBar,{value:query,onChange:setQuery}),/*#__PURE__*/_jsx(SegmentedControl,{value:view,onChange:setView,options:[\"Map\",\"List\"]})]}),/*#__PURE__*/_jsx(FilterBar,{island:island,setIsland:setIsland,skill:skill,setSkill:setSkill,openNowOnly:openNowOnly,setOpenNowOnly:setOpenNowOnly})]}),/*#__PURE__*/_jsx(\"div\",{style:{height:14}}),view===\"Map\"?/*#__PURE__*/_jsx(CourtMap,{courts:filtered,computedById:computedById,selectedId:selectedId,onSelect:setSelectedId}):/*#__PURE__*/_jsx(CourtList,{courts:filtered,computedById:computedById,selectedId:selectedId,onSelect:setSelectedId}),/*#__PURE__*/_jsx(CourtDrawer,{open:!!selected,court:selected,computed:selected?computedById[selected.id]:null,onClose:()=>setSelectedId(null)})]});}","map":{"version":3,"names":["useMemo","useState","SearchBar","SegmentedControl","FilterBar","CourtDrawer","CourtMap","CourtList","computeCourtStatus","loadCourts","jsx","_jsx","jsxs","_jsxs","Home","view","setView","selectedId","setSelectedId","query","setQuery","island","setIsland","skill","setSkill","openNowOnly","setOpenNowOnly","courts","computedById","map","c","id","filtered","q","trim","toLowerCase","filter","skillLevels","includes","meta","isOpenNow","hay","concat","name","city","address","selected","find","className","children","value","onChange","options","style","height","onSelect","open","court","computed","onClose"],"sources":["/Users/taikiyamashita/Desktop/hawaii-pickle-play/src/pages/Home.jsx"],"sourcesContent":["import { useMemo, useState } from \"react\";\nimport SearchBar from \"../components/SearchBar\";\nimport SegmentedControl from \"../components/SegmentedControl\";\nimport FilterBar from \"../components/FilterBar\";\nimport CourtDrawer from \"../components/CourtDrawer\";\nimport CourtMap from \"../features/courts/CourtMap\";\nimport CourtList from \"../features/courts/CourtList\";\n\nimport { computeCourtStatus } from \"../utils/time\";\nimport { loadCourts } from \"../store/courtsStore\";\n\nexport default function Home() {\n  const [view, setView] = useState(\"Map\");\n  const [selectedId, setSelectedId] = useState(null);\n\n  const [query, setQuery] = useState(\"\");\n  const [island, setIsland] = useState(\"All\");\n  const [skill, setSkill] = useState(\"All\");\n  const [openNowOnly, setOpenNowOnly] = useState(false);\n\n  const courts = loadCourts();\n\n  const computedById = useMemo(() => {\n    const map = {};\n    for (const c of courts) map[c.id] = computeCourtStatus(c);\n    return map;\n  }, [courts]);\n\n  const filtered = useMemo(() => {\n    const q = query.trim().toLowerCase();\n    return courts.filter((c) => {\n      if (island !== \"All\" && c.island !== island) return false;\n      if (skill !== \"All\" && !(c.skillLevels || []).includes(skill)) return false;\n\n      const meta = computedById[c.id];\n      if (openNowOnly && !meta?.isOpenNow) return false;\n\n      if (!q) return true;\n      const hay = `${c.name} ${c.city} ${c.island} ${c.address}`.toLowerCase();\n      return hay.includes(q);\n    });\n  }, [courts, computedById, query, island, skill, openNowOnly]);\n\n  const selected = useMemo(\n    () => courts.find((c) => c.id === selectedId) || null,\n    [courts, selectedId]\n  );\n\n  return (\n    <div className=\"container\">\n      <div className=\"card\">\n        <div className=\"row\">\n          <SearchBar value={query} onChange={setQuery} />\n          <SegmentedControl value={view} onChange={setView} options={[\"Map\",\"List\"]} />\n        </div>\n\n        <FilterBar\n          island={island} setIsland={setIsland}\n          skill={skill} setSkill={setSkill}\n          openNowOnly={openNowOnly} setOpenNowOnly={setOpenNowOnly}\n        />\n      </div>\n\n      <div style={{ height: 14 }} />\n\n      {view === \"Map\" ? (\n        <CourtMap\n          courts={filtered}\n          computedById={computedById}\n          selectedId={selectedId}\n          onSelect={setSelectedId}\n        />\n      ) : (\n        <CourtList\n          courts={filtered}\n          computedById={computedById}\n          selectedId={selectedId}\n          onSelect={setSelectedId}\n        />\n      )}\n\n      <CourtDrawer\n        open={!!selected}\n        court={selected}\n        computed={selected ? computedById[selected.id] : null}\n        onClose={() => setSelectedId(null)}\n      />\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}