{"ast":null,"code":"import { DateTime } from \"luxon\";\nconst ZONE = \"Pacific/Honolulu\";\n\n// Luxon: Monday=1 ... Sunday=7\nconst DAY_TO_LUXON = {\n  Mon: 1,\n  Tue: 2,\n  Wed: 3,\n  Thu: 4,\n  Fri: 5,\n  Sat: 6,\n  Sun: 7\n};\nfunction parseTimeLabelToMinutes(label) {\n  // e.g. \"5:30 PM\"\n  const dt = DateTime.fromFormat(label.trim(), \"h:mm a\", {\n    zone: ZONE\n  });\n  if (!dt.isValid) return null;\n  return dt.hour * 60 + dt.minute;\n}\nexport function nowHST() {\n  return DateTime.now().setZone(ZONE);\n}\nexport function computeCourtStatus(court) {\n  const now = nowHST();\n  const weekday = now.weekday; // 1..7\n  const nowMin = now.hour * 60 + now.minute;\n  let isOpenNow = false;\n  let nextStart = null;\n  for (const slot of court.openPlay || []) {\n    const w = DAY_TO_LUXON[slot.day];\n    if (!w) continue;\n    const startMin = parseTimeLabelToMinutes(slot.start);\n    const endMin = parseTimeLabelToMinutes(slot.end);\n    if (startMin == null || endMin == null) continue;\n\n    // Open now check (today only)\n    if (w === weekday && nowMin >= startMin && nowMin <= endMin) {\n      isOpenNow = true;\n    }\n\n    // Next start candidate (today later or future)\n    const daysAhead = (w - weekday + 7) % 7; // 0..6\n    const startCandidate = now.startOf(\"day\").plus({\n      days: daysAhead,\n      minutes: startMin\n    });\n    if (startCandidate < now) continue;\n    if (!nextStart || startCandidate < nextStart) nextStart = startCandidate;\n  }\n  const nextStartLabel = nextStart ? nextStart.toFormat(\"ccc h:mm a\") : null;\n  return {\n    isOpenNow,\n    nextStart,\n    nextStartLabel\n  };\n}","map":{"version":3,"names":["DateTime","ZONE","DAY_TO_LUXON","Mon","Tue","Wed","Thu","Fri","Sat","Sun","parseTimeLabelToMinutes","label","dt","fromFormat","trim","zone","isValid","hour","minute","nowHST","now","setZone","computeCourtStatus","court","weekday","nowMin","isOpenNow","nextStart","slot","openPlay","w","day","startMin","start","endMin","end","daysAhead","startCandidate","startOf","plus","days","minutes","nextStartLabel","toFormat"],"sources":["/Users/taikiyamashita/Desktop/hawaii-pickle-play/src/utils/time.js"],"sourcesContent":["import { DateTime } from \"luxon\";\n\nconst ZONE = \"Pacific/Honolulu\";\n\n// Luxon: Monday=1 ... Sunday=7\nconst DAY_TO_LUXON = {\n  Mon: 1,\n  Tue: 2,\n  Wed: 3,\n  Thu: 4,\n  Fri: 5,\n  Sat: 6,\n  Sun: 7,\n};\n\nfunction parseTimeLabelToMinutes(label) {\n  // e.g. \"5:30 PM\"\n  const dt = DateTime.fromFormat(label.trim(), \"h:mm a\", { zone: ZONE });\n  if (!dt.isValid) return null;\n  return dt.hour * 60 + dt.minute;\n}\n\nexport function nowHST() {\n  return DateTime.now().setZone(ZONE);\n}\n\nexport function computeCourtStatus(court) {\n  const now = nowHST();\n  const weekday = now.weekday; // 1..7\n  const nowMin = now.hour * 60 + now.minute;\n\n  let isOpenNow = false;\n  let nextStart = null;\n\n  for (const slot of court.openPlay || []) {\n    const w = DAY_TO_LUXON[slot.day];\n    if (!w) continue;\n\n    const startMin = parseTimeLabelToMinutes(slot.start);\n    const endMin = parseTimeLabelToMinutes(slot.end);\n    if (startMin == null || endMin == null) continue;\n\n    // Open now check (today only)\n    if (w === weekday && nowMin >= startMin && nowMin <= endMin) {\n      isOpenNow = true;\n    }\n\n    // Next start candidate (today later or future)\n    const daysAhead = (w - weekday + 7) % 7; // 0..6\n    const startCandidate = now\n      .startOf(\"day\")\n      .plus({ days: daysAhead, minutes: startMin });\n\n    if (startCandidate < now) continue;\n    if (!nextStart || startCandidate < nextStart) nextStart = startCandidate;\n  }\n\n  const nextStartLabel = nextStart ? nextStart.toFormat(\"ccc h:mm a\") : null;\n\n  return { isOpenNow, nextStart, nextStartLabel };\n}\n"],"mappings":"AAAA,SAASA,QAAQ,QAAQ,OAAO;AAEhC,MAAMC,IAAI,GAAG,kBAAkB;;AAE/B;AACA,MAAMC,YAAY,GAAG;EACnBC,GAAG,EAAE,CAAC;EACNC,GAAG,EAAE,CAAC;EACNC,GAAG,EAAE,CAAC;EACNC,GAAG,EAAE,CAAC;EACNC,GAAG,EAAE,CAAC;EACNC,GAAG,EAAE,CAAC;EACNC,GAAG,EAAE;AACP,CAAC;AAED,SAASC,uBAAuBA,CAACC,KAAK,EAAE;EACtC;EACA,MAAMC,EAAE,GAAGZ,QAAQ,CAACa,UAAU,CAACF,KAAK,CAACG,IAAI,CAAC,CAAC,EAAE,QAAQ,EAAE;IAAEC,IAAI,EAAEd;EAAK,CAAC,CAAC;EACtE,IAAI,CAACW,EAAE,CAACI,OAAO,EAAE,OAAO,IAAI;EAC5B,OAAOJ,EAAE,CAACK,IAAI,GAAG,EAAE,GAAGL,EAAE,CAACM,MAAM;AACjC;AAEA,OAAO,SAASC,MAAMA,CAAA,EAAG;EACvB,OAAOnB,QAAQ,CAACoB,GAAG,CAAC,CAAC,CAACC,OAAO,CAACpB,IAAI,CAAC;AACrC;AAEA,OAAO,SAASqB,kBAAkBA,CAACC,KAAK,EAAE;EACxC,MAAMH,GAAG,GAAGD,MAAM,CAAC,CAAC;EACpB,MAAMK,OAAO,GAAGJ,GAAG,CAACI,OAAO,CAAC,CAAC;EAC7B,MAAMC,MAAM,GAAGL,GAAG,CAACH,IAAI,GAAG,EAAE,GAAGG,GAAG,CAACF,MAAM;EAEzC,IAAIQ,SAAS,GAAG,KAAK;EACrB,IAAIC,SAAS,GAAG,IAAI;EAEpB,KAAK,MAAMC,IAAI,IAAIL,KAAK,CAACM,QAAQ,IAAI,EAAE,EAAE;IACvC,MAAMC,CAAC,GAAG5B,YAAY,CAAC0B,IAAI,CAACG,GAAG,CAAC;IAChC,IAAI,CAACD,CAAC,EAAE;IAER,MAAME,QAAQ,GAAGtB,uBAAuB,CAACkB,IAAI,CAACK,KAAK,CAAC;IACpD,MAAMC,MAAM,GAAGxB,uBAAuB,CAACkB,IAAI,CAACO,GAAG,CAAC;IAChD,IAAIH,QAAQ,IAAI,IAAI,IAAIE,MAAM,IAAI,IAAI,EAAE;;IAExC;IACA,IAAIJ,CAAC,KAAKN,OAAO,IAAIC,MAAM,IAAIO,QAAQ,IAAIP,MAAM,IAAIS,MAAM,EAAE;MAC3DR,SAAS,GAAG,IAAI;IAClB;;IAEA;IACA,MAAMU,SAAS,GAAG,CAACN,CAAC,GAAGN,OAAO,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC;IACzC,MAAMa,cAAc,GAAGjB,GAAG,CACvBkB,OAAO,CAAC,KAAK,CAAC,CACdC,IAAI,CAAC;MAAEC,IAAI,EAAEJ,SAAS;MAAEK,OAAO,EAAET;IAAS,CAAC,CAAC;IAE/C,IAAIK,cAAc,GAAGjB,GAAG,EAAE;IAC1B,IAAI,CAACO,SAAS,IAAIU,cAAc,GAAGV,SAAS,EAAEA,SAAS,GAAGU,cAAc;EAC1E;EAEA,MAAMK,cAAc,GAAGf,SAAS,GAAGA,SAAS,CAACgB,QAAQ,CAAC,YAAY,CAAC,GAAG,IAAI;EAE1E,OAAO;IAAEjB,SAAS;IAAEC,SAAS;IAAEe;EAAe,CAAC;AACjD","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}