{"ast":null,"code":"import { DateTime } from \"luxon\";\nconst ZONE = \"Pacific/Honolulu\";\nconst DAY_TO_LUXON = {\n  Mon: 1,\n  Tue: 2,\n  Wed: 3,\n  Thu: 4,\n  Fri: 5,\n  Sat: 6,\n  Sun: 7\n};\nfunction parseToMinutes(label) {\n  const dt = DateTime.fromFormat(label.trim(), \"h:mm a\", {\n    zone: ZONE\n  });\n  if (!dt.isValid) return null;\n  return dt.hour * 60 + dt.minute;\n}\nexport function nowHST() {\n  return DateTime.now().setZone(ZONE);\n}\nexport function computeCourtStatus(court) {\n  const now = nowHST();\n  const weekday = now.weekday;\n  const nowMin = now.hour * 60 + now.minute;\n  let isOpenNow = false;\n  let nextStart = null;\n  for (const slot of court.openPlay || []) {\n    const w = DAY_TO_LUXON[slot.day];\n    if (!w) continue;\n    const startMin = parseToMinutes(slot.start);\n    const endMin = parseToMinutes(slot.end);\n    if (startMin == null || endMin == null) continue;\n    if (w === weekday && nowMin >= startMin && nowMin <= endMin) isOpenNow = true;\n    const daysAhead = (w - weekday + 7) % 7;\n    const startCandidate = now.startOf(\"day\").plus({\n      days: daysAhead,\n      minutes: startMin\n    });\n    if (startCandidate < now) continue;\n    if (!nextStart || startCandidate < nextStart) nextStart = startCandidate;\n  }\n  return {\n    isOpenNow,\n    nextStart,\n    nextStartLabel: nextStart ? nextStart.toFormat(\"ccc h:mm a\") : null\n  };\n}","map":{"version":3,"names":["DateTime","ZONE","DAY_TO_LUXON","Mon","Tue","Wed","Thu","Fri","Sat","Sun","parseToMinutes","label","dt","fromFormat","trim","zone","isValid","hour","minute","nowHST","now","setZone","computeCourtStatus","court","weekday","nowMin","isOpenNow","nextStart","slot","openPlay","w","day","startMin","start","endMin","end","daysAhead","startCandidate","startOf","plus","days","minutes","nextStartLabel","toFormat"],"sources":["/Users/taikiyamashita/Desktop/hawaii-pickle-play/src/utils/time.js"],"sourcesContent":["import { DateTime } from \"luxon\";\nconst ZONE = \"Pacific/Honolulu\";\nconst DAY_TO_LUXON = { Mon:1, Tue:2, Wed:3, Thu:4, Fri:5, Sat:6, Sun:7 };\n\nfunction parseToMinutes(label) {\n  const dt = DateTime.fromFormat(label.trim(), \"h:mm a\", { zone: ZONE });\n  if (!dt.isValid) return null;\n  return dt.hour * 60 + dt.minute;\n}\n\nexport function nowHST() {\n  return DateTime.now().setZone(ZONE);\n}\n\nexport function computeCourtStatus(court) {\n  const now = nowHST();\n  const weekday = now.weekday;\n  const nowMin = now.hour * 60 + now.minute;\n\n  let isOpenNow = false;\n  let nextStart = null;\n\n  for (const slot of court.openPlay || []) {\n    const w = DAY_TO_LUXON[slot.day];\n    if (!w) continue;\n\n    const startMin = parseToMinutes(slot.start);\n    const endMin = parseToMinutes(slot.end);\n    if (startMin == null || endMin == null) continue;\n\n    if (w === weekday && nowMin >= startMin && nowMin <= endMin) isOpenNow = true;\n\n    const daysAhead = (w - weekday + 7) % 7;\n    const startCandidate = now.startOf(\"day\").plus({ days: daysAhead, minutes: startMin });\n    if (startCandidate < now) continue;\n    if (!nextStart || startCandidate < nextStart) nextStart = startCandidate;\n  }\n\n  return {\n    isOpenNow,\n    nextStart,\n    nextStartLabel: nextStart ? nextStart.toFormat(\"ccc h:mm a\") : null,\n  };\n}\n"],"mappings":"AAAA,SAASA,QAAQ,QAAQ,OAAO;AAChC,MAAMC,IAAI,GAAG,kBAAkB;AAC/B,MAAMC,YAAY,GAAG;EAAEC,GAAG,EAAC,CAAC;EAAEC,GAAG,EAAC,CAAC;EAAEC,GAAG,EAAC,CAAC;EAAEC,GAAG,EAAC,CAAC;EAAEC,GAAG,EAAC,CAAC;EAAEC,GAAG,EAAC,CAAC;EAAEC,GAAG,EAAC;AAAE,CAAC;AAExE,SAASC,cAAcA,CAACC,KAAK,EAAE;EAC7B,MAAMC,EAAE,GAAGZ,QAAQ,CAACa,UAAU,CAACF,KAAK,CAACG,IAAI,CAAC,CAAC,EAAE,QAAQ,EAAE;IAAEC,IAAI,EAAEd;EAAK,CAAC,CAAC;EACtE,IAAI,CAACW,EAAE,CAACI,OAAO,EAAE,OAAO,IAAI;EAC5B,OAAOJ,EAAE,CAACK,IAAI,GAAG,EAAE,GAAGL,EAAE,CAACM,MAAM;AACjC;AAEA,OAAO,SAASC,MAAMA,CAAA,EAAG;EACvB,OAAOnB,QAAQ,CAACoB,GAAG,CAAC,CAAC,CAACC,OAAO,CAACpB,IAAI,CAAC;AACrC;AAEA,OAAO,SAASqB,kBAAkBA,CAACC,KAAK,EAAE;EACxC,MAAMH,GAAG,GAAGD,MAAM,CAAC,CAAC;EACpB,MAAMK,OAAO,GAAGJ,GAAG,CAACI,OAAO;EAC3B,MAAMC,MAAM,GAAGL,GAAG,CAACH,IAAI,GAAG,EAAE,GAAGG,GAAG,CAACF,MAAM;EAEzC,IAAIQ,SAAS,GAAG,KAAK;EACrB,IAAIC,SAAS,GAAG,IAAI;EAEpB,KAAK,MAAMC,IAAI,IAAIL,KAAK,CAACM,QAAQ,IAAI,EAAE,EAAE;IACvC,MAAMC,CAAC,GAAG5B,YAAY,CAAC0B,IAAI,CAACG,GAAG,CAAC;IAChC,IAAI,CAACD,CAAC,EAAE;IAER,MAAME,QAAQ,GAAGtB,cAAc,CAACkB,IAAI,CAACK,KAAK,CAAC;IAC3C,MAAMC,MAAM,GAAGxB,cAAc,CAACkB,IAAI,CAACO,GAAG,CAAC;IACvC,IAAIH,QAAQ,IAAI,IAAI,IAAIE,MAAM,IAAI,IAAI,EAAE;IAExC,IAAIJ,CAAC,KAAKN,OAAO,IAAIC,MAAM,IAAIO,QAAQ,IAAIP,MAAM,IAAIS,MAAM,EAAER,SAAS,GAAG,IAAI;IAE7E,MAAMU,SAAS,GAAG,CAACN,CAAC,GAAGN,OAAO,GAAG,CAAC,IAAI,CAAC;IACvC,MAAMa,cAAc,GAAGjB,GAAG,CAACkB,OAAO,CAAC,KAAK,CAAC,CAACC,IAAI,CAAC;MAAEC,IAAI,EAAEJ,SAAS;MAAEK,OAAO,EAAET;IAAS,CAAC,CAAC;IACtF,IAAIK,cAAc,GAAGjB,GAAG,EAAE;IAC1B,IAAI,CAACO,SAAS,IAAIU,cAAc,GAAGV,SAAS,EAAEA,SAAS,GAAGU,cAAc;EAC1E;EAEA,OAAO;IACLX,SAAS;IACTC,SAAS;IACTe,cAAc,EAAEf,SAAS,GAAGA,SAAS,CAACgB,QAAQ,CAAC,YAAY,CAAC,GAAG;EACjE,CAAC;AACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}