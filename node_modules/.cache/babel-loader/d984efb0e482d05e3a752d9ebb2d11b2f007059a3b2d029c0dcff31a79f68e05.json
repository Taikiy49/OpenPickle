{"ast":null,"code":"// src/store/crowdStore.js\nimport { uid } from \"../utils/id\";\nconst KEY = \"pph:crowdReports\";\n\n/**\n * report:\n * { id, courtId, players, note, condition, createdAt }\n */\nexport function loadCrowdReports() {\n  try {\n    return JSON.parse(localStorage.getItem(KEY) || \"[]\");\n  } catch {\n    return [];\n  }\n}\nexport function saveCrowdReports(list) {\n  localStorage.setItem(KEY, JSON.stringify(list));\n}\nexport function addCrowdReport({\n  courtId,\n  players,\n  note,\n  condition\n}) {\n  const list = loadCrowdReports();\n  list.unshift({\n    id: uid(\"crowd\"),\n    courtId,\n    players: Number(players || 0),\n    note: String(note || \"\"),\n    condition: String(condition || \"Good\"),\n    createdAt: Date.now()\n  });\n  saveCrowdReports(list);\n  return list;\n}\nexport function getCourtCrowdSummary(courtId) {\n  const list = loadCrowdReports().filter(r => r.courtId === courtId);\n\n  // take most recent 5\n  const recent = list.slice(0, 5);\n  const avgPlayers = recent.length ? Math.round(recent.reduce((sum, r) => sum + (Number(r.players) || 0), 0) / recent.length) : 0;\n  return {\n    recent,\n    avgPlayers\n  };\n}","map":{"version":3,"names":["uid","KEY","loadCrowdReports","JSON","parse","localStorage","getItem","saveCrowdReports","list","setItem","stringify","addCrowdReport","courtId","players","note","condition","unshift","id","Number","String","createdAt","Date","now","getCourtCrowdSummary","filter","r","recent","slice","avgPlayers","length","Math","round","reduce","sum"],"sources":["/Users/taikiyamashita/Desktop/hawaii-pickle-play/src/store/crowdStore.js"],"sourcesContent":["// src/store/crowdStore.js\nimport { uid } from \"../utils/id\";\n\nconst KEY = \"pph:crowdReports\";\n\n/**\n * report:\n * { id, courtId, players, note, condition, createdAt }\n */\nexport function loadCrowdReports() {\n  try {\n    return JSON.parse(localStorage.getItem(KEY) || \"[]\");\n  } catch {\n    return [];\n  }\n}\n\nexport function saveCrowdReports(list) {\n  localStorage.setItem(KEY, JSON.stringify(list));\n}\n\nexport function addCrowdReport({ courtId, players, note, condition }) {\n  const list = loadCrowdReports();\n  list.unshift({\n    id: uid(\"crowd\"),\n    courtId,\n    players: Number(players || 0),\n    note: String(note || \"\"),\n    condition: String(condition || \"Good\"),\n    createdAt: Date.now(),\n  });\n  saveCrowdReports(list);\n  return list;\n}\n\nexport function getCourtCrowdSummary(courtId) {\n  const list = loadCrowdReports().filter((r) => r.courtId === courtId);\n\n  // take most recent 5\n  const recent = list.slice(0, 5);\n\n  const avgPlayers = recent.length\n    ? Math.round(recent.reduce((sum, r) => sum + (Number(r.players) || 0), 0) / recent.length)\n    : 0;\n\n  return { recent, avgPlayers };\n}\n"],"mappings":"AAAA;AACA,SAASA,GAAG,QAAQ,aAAa;AAEjC,MAAMC,GAAG,GAAG,kBAAkB;;AAE9B;AACA;AACA;AACA;AACA,OAAO,SAASC,gBAAgBA,CAAA,EAAG;EACjC,IAAI;IACF,OAAOC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAACL,GAAG,CAAC,IAAI,IAAI,CAAC;EACtD,CAAC,CAAC,MAAM;IACN,OAAO,EAAE;EACX;AACF;AAEA,OAAO,SAASM,gBAAgBA,CAACC,IAAI,EAAE;EACrCH,YAAY,CAACI,OAAO,CAACR,GAAG,EAAEE,IAAI,CAACO,SAAS,CAACF,IAAI,CAAC,CAAC;AACjD;AAEA,OAAO,SAASG,cAAcA,CAAC;EAAEC,OAAO;EAAEC,OAAO;EAAEC,IAAI;EAAEC;AAAU,CAAC,EAAE;EACpE,MAAMP,IAAI,GAAGN,gBAAgB,CAAC,CAAC;EAC/BM,IAAI,CAACQ,OAAO,CAAC;IACXC,EAAE,EAAEjB,GAAG,CAAC,OAAO,CAAC;IAChBY,OAAO;IACPC,OAAO,EAAEK,MAAM,CAACL,OAAO,IAAI,CAAC,CAAC;IAC7BC,IAAI,EAAEK,MAAM,CAACL,IAAI,IAAI,EAAE,CAAC;IACxBC,SAAS,EAAEI,MAAM,CAACJ,SAAS,IAAI,MAAM,CAAC;IACtCK,SAAS,EAAEC,IAAI,CAACC,GAAG,CAAC;EACtB,CAAC,CAAC;EACFf,gBAAgB,CAACC,IAAI,CAAC;EACtB,OAAOA,IAAI;AACb;AAEA,OAAO,SAASe,oBAAoBA,CAACX,OAAO,EAAE;EAC5C,MAAMJ,IAAI,GAAGN,gBAAgB,CAAC,CAAC,CAACsB,MAAM,CAAEC,CAAC,IAAKA,CAAC,CAACb,OAAO,KAAKA,OAAO,CAAC;;EAEpE;EACA,MAAMc,MAAM,GAAGlB,IAAI,CAACmB,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;EAE/B,MAAMC,UAAU,GAAGF,MAAM,CAACG,MAAM,GAC5BC,IAAI,CAACC,KAAK,CAACL,MAAM,CAACM,MAAM,CAAC,CAACC,GAAG,EAAER,CAAC,KAAKQ,GAAG,IAAIf,MAAM,CAACO,CAAC,CAACZ,OAAO,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,GAAGa,MAAM,CAACG,MAAM,CAAC,GACxF,CAAC;EAEL,OAAO;IAAEH,MAAM;IAAEE;EAAW,CAAC;AAC/B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}