{"ast":null,"code":"import { uid } from \"../utils/id\";\nconst KEY = \"pph:games\";\n\n/**\n * game:\n * { id, courtId, title, skill, whenLabel, maxPlayers, players: [name], createdAt }\n */\nexport function loadGames() {\n  try {\n    return JSON.parse(localStorage.getItem(KEY) || \"[]\");\n  } catch {\n    return [];\n  }\n}\nexport function saveGames(list) {\n  localStorage.setItem(KEY, JSON.stringify(list));\n}\nexport function createGame({\n  courtId,\n  title,\n  skill,\n  whenLabel,\n  maxPlayers,\n  host\n}) {\n  const list = loadGames();\n  list.unshift({\n    id: uid(\"game\"),\n    courtId,\n    title: title || \"Open Play Meetup\",\n    skill: skill || \"All\",\n    whenLabel: whenLabel || \"Today\",\n    maxPlayers: Number(maxPlayers || 8),\n    players: host ? [host] : [],\n    createdAt: Date.now()\n  });\n  saveGames(list);\n  return list;\n}\nexport function joinGame(gameId, name) {\n  const list = loadGames();\n  const g = list.find(x => x.id === gameId);\n  if (!g) return list;\n  if (!name) return list;\n  if (!g.players.includes(name) && g.players.length < g.maxPlayers) g.players.push(name);\n  saveGames(list);\n  return list;\n}\nexport function leaveGame(gameId, name) {\n  const list = loadGames();\n  const g = list.find(x => x.id === gameId);\n  if (!g) return list;\n  g.players = g.players.filter(p => p !== name);\n  saveGames(list);\n  return list;\n}\nexport function deleteGame(gameId) {\n  const list = loadGames().filter(g => g.id !== gameId);\n  saveGames(list);\n  return list;\n}","map":{"version":3,"names":["uid","KEY","loadGames","JSON","parse","localStorage","getItem","saveGames","list","setItem","stringify","createGame","courtId","title","skill","whenLabel","maxPlayers","host","unshift","id","Number","players","createdAt","Date","now","joinGame","gameId","name","g","find","x","includes","length","push","leaveGame","filter","p","deleteGame"],"sources":["/Users/taikiyamashita/Desktop/hawaii-pickle-play/src/store/crowdStore.js"],"sourcesContent":["import { uid } from \"../utils/id\";\n\nconst KEY = \"pph:games\";\n\n/**\n * game:\n * { id, courtId, title, skill, whenLabel, maxPlayers, players: [name], createdAt }\n */\nexport function loadGames() {\n  try { return JSON.parse(localStorage.getItem(KEY) || \"[]\"); }\n  catch { return []; }\n}\nexport function saveGames(list) {\n  localStorage.setItem(KEY, JSON.stringify(list));\n}\nexport function createGame({ courtId, title, skill, whenLabel, maxPlayers, host }) {\n  const list = loadGames();\n  list.unshift({\n    id: uid(\"game\"),\n    courtId,\n    title: title || \"Open Play Meetup\",\n    skill: skill || \"All\",\n    whenLabel: whenLabel || \"Today\",\n    maxPlayers: Number(maxPlayers || 8),\n    players: host ? [host] : [],\n    createdAt: Date.now(),\n  });\n  saveGames(list);\n  return list;\n}\nexport function joinGame(gameId, name) {\n  const list = loadGames();\n  const g = list.find(x => x.id === gameId);\n  if (!g) return list;\n  if (!name) return list;\n  if (!g.players.includes(name) && g.players.length < g.maxPlayers) g.players.push(name);\n  saveGames(list);\n  return list;\n}\nexport function leaveGame(gameId, name) {\n  const list = loadGames();\n  const g = list.find(x => x.id === gameId);\n  if (!g) return list;\n  g.players = g.players.filter(p => p !== name);\n  saveGames(list);\n  return list;\n}\nexport function deleteGame(gameId) {\n  const list = loadGames().filter(g => g.id !== gameId);\n  saveGames(list);\n  return list;\n}\n"],"mappings":"AAAA,SAASA,GAAG,QAAQ,aAAa;AAEjC,MAAMC,GAAG,GAAG,WAAW;;AAEvB;AACA;AACA;AACA;AACA,OAAO,SAASC,SAASA,CAAA,EAAG;EAC1B,IAAI;IAAE,OAAOC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAACL,GAAG,CAAC,IAAI,IAAI,CAAC;EAAE,CAAC,CAC7D,MAAM;IAAE,OAAO,EAAE;EAAE;AACrB;AACA,OAAO,SAASM,SAASA,CAACC,IAAI,EAAE;EAC9BH,YAAY,CAACI,OAAO,CAACR,GAAG,EAAEE,IAAI,CAACO,SAAS,CAACF,IAAI,CAAC,CAAC;AACjD;AACA,OAAO,SAASG,UAAUA,CAAC;EAAEC,OAAO;EAAEC,KAAK;EAAEC,KAAK;EAAEC,SAAS;EAAEC,UAAU;EAAEC;AAAK,CAAC,EAAE;EACjF,MAAMT,IAAI,GAAGN,SAAS,CAAC,CAAC;EACxBM,IAAI,CAACU,OAAO,CAAC;IACXC,EAAE,EAAEnB,GAAG,CAAC,MAAM,CAAC;IACfY,OAAO;IACPC,KAAK,EAAEA,KAAK,IAAI,kBAAkB;IAClCC,KAAK,EAAEA,KAAK,IAAI,KAAK;IACrBC,SAAS,EAAEA,SAAS,IAAI,OAAO;IAC/BC,UAAU,EAAEI,MAAM,CAACJ,UAAU,IAAI,CAAC,CAAC;IACnCK,OAAO,EAAEJ,IAAI,GAAG,CAACA,IAAI,CAAC,GAAG,EAAE;IAC3BK,SAAS,EAAEC,IAAI,CAACC,GAAG,CAAC;EACtB,CAAC,CAAC;EACFjB,SAAS,CAACC,IAAI,CAAC;EACf,OAAOA,IAAI;AACb;AACA,OAAO,SAASiB,QAAQA,CAACC,MAAM,EAAEC,IAAI,EAAE;EACrC,MAAMnB,IAAI,GAAGN,SAAS,CAAC,CAAC;EACxB,MAAM0B,CAAC,GAAGpB,IAAI,CAACqB,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACX,EAAE,KAAKO,MAAM,CAAC;EACzC,IAAI,CAACE,CAAC,EAAE,OAAOpB,IAAI;EACnB,IAAI,CAACmB,IAAI,EAAE,OAAOnB,IAAI;EACtB,IAAI,CAACoB,CAAC,CAACP,OAAO,CAACU,QAAQ,CAACJ,IAAI,CAAC,IAAIC,CAAC,CAACP,OAAO,CAACW,MAAM,GAAGJ,CAAC,CAACZ,UAAU,EAAEY,CAAC,CAACP,OAAO,CAACY,IAAI,CAACN,IAAI,CAAC;EACtFpB,SAAS,CAACC,IAAI,CAAC;EACf,OAAOA,IAAI;AACb;AACA,OAAO,SAAS0B,SAASA,CAACR,MAAM,EAAEC,IAAI,EAAE;EACtC,MAAMnB,IAAI,GAAGN,SAAS,CAAC,CAAC;EACxB,MAAM0B,CAAC,GAAGpB,IAAI,CAACqB,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACX,EAAE,KAAKO,MAAM,CAAC;EACzC,IAAI,CAACE,CAAC,EAAE,OAAOpB,IAAI;EACnBoB,CAAC,CAACP,OAAO,GAAGO,CAAC,CAACP,OAAO,CAACc,MAAM,CAACC,CAAC,IAAIA,CAAC,KAAKT,IAAI,CAAC;EAC7CpB,SAAS,CAACC,IAAI,CAAC;EACf,OAAOA,IAAI;AACb;AACA,OAAO,SAAS6B,UAAUA,CAACX,MAAM,EAAE;EACjC,MAAMlB,IAAI,GAAGN,SAAS,CAAC,CAAC,CAACiC,MAAM,CAACP,CAAC,IAAIA,CAAC,CAACT,EAAE,KAAKO,MAAM,CAAC;EACrDnB,SAAS,CAACC,IAAI,CAAC;EACf,OAAOA,IAAI;AACb","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}